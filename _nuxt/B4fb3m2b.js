import{r as w,as as z,A,ag as N,ad as q,z as I,ac as V,a4 as F,ai as G,v as $,i as D,k as K,l as x,n as X,w as H,a7 as J,X as Q,o as S,K as B,a3 as U,_ as Y}from"./Kwya5N3u.js";function O(e){return N()?(q(e),!0):!1}function b(e){return typeof e=="function"?e():A(e)}const C=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Z=Object.prototype.toString,ee=e=>Z.call(e)==="[object Object]",h=()=>{},te=ne();function ne(){var e,t;return C&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function oe(e){let t;function s(){return t||(t=e()),t}return s.reset=async()=>{const n=t;t=void 0,n&&await n},s}function ae(e,t,s={}){const{immediate:n=!0}=s,r=w(!1);let o=null;function d(){o&&(clearTimeout(o),o=null)}function c(){r.value=!1,d()}function l(...p){d(),r.value=!0,o=setTimeout(()=>{r.value=!1,o=null,e(...p)},b(t))}return n&&(r.value=!0,C&&l()),O(c),{isPending:z(r),start:l,stop:c}}function g(e){var t;const s=b(e);return(t=s==null?void 0:s.$el)!=null?t:s}const M=C?window:void 0,L=C?window.navigator:void 0;function _(...e){let t,s,n,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([s,n,r]=e,t=M):[t,s,n,r]=e,!t)return h;Array.isArray(s)||(s=[s]),Array.isArray(n)||(n=[n]);const o=[],d=()=>{o.forEach(u=>u()),o.length=0},c=(u,m,a,i)=>(u.addEventListener(m,a,i),()=>u.removeEventListener(m,a,i)),l=V(()=>[g(t),b(r)],([u,m])=>{if(d(),!u)return;const a=ee(m)?{...m}:m;o.push(...s.flatMap(i=>n.map(v=>c(u,i,v,a))))},{immediate:!0,flush:"post"}),p=()=>{l(),d()};return O(p),p}let P=!1;function se(e,t,s={}){const{window:n=M,ignore:r=[],capture:o=!0,detectIframe:d=!1}=s;if(!n)return h;te&&!P&&(P=!0,Array.from(n.document.body.children).forEach(a=>a.addEventListener("click",h)),n.document.documentElement.addEventListener("click",h));let c=!0;const l=a=>r.some(i=>{if(typeof i=="string")return Array.from(n.document.querySelectorAll(i)).some(v=>v===a.target||a.composedPath().includes(v));{const v=g(i);return v&&(a.target===v||a.composedPath().includes(v))}}),u=[_(n,"click",a=>{const i=g(e);if(!(!i||i===a.target||a.composedPath().includes(i))){if(a.detail===0&&(c=!l(a)),!c){c=!0;return}t(a)}},{passive:!0,capture:o}),_(n,"pointerdown",a=>{const i=g(e);c=!l(a)&&!!(i&&!a.composedPath().includes(i))},{passive:!0}),d&&_(n,"blur",a=>{setTimeout(()=>{var i;const v=g(e);((i=n.document.activeElement)==null?void 0:i.tagName)==="IFRAME"&&!(v!=null&&v.contains(n.document.activeElement))&&t(a)},0)})].filter(Boolean);return()=>u.forEach(a=>a())}function ie(){const e=w(!1),t=G();return t&&F(()=>{e.value=!0},t),e}function W(e){const t=ie();return I(()=>(t.value,!!e()))}function T(e,t={}){const{controls:s=!1,navigator:n=L}=t,r=W(()=>n&&"permissions"in n);let o;const d=typeof e=="string"?{name:e}:e,c=w(),l=()=>{o&&(c.value=o.state)},p=oe(async()=>{if(r.value){if(!o)try{o=await n.permissions.query(d),_(o,"change",l),l()}catch{c.value="prompt"}return o}});return p(),s?{state:c,isSupported:r,query:p}:c}function re(e={}){const{navigator:t=L,read:s=!1,source:n,copiedDuring:r=1500,legacy:o=!1}=e,d=W(()=>t&&"clipboard"in t),c=T("clipboard-read"),l=T("clipboard-write"),p=I(()=>d.value||o),u=w(""),m=w(!1),a=ae(()=>m.value=!1,r);function i(){d.value&&k(c.value)?t.clipboard.readText().then(f=>{u.value=f}):u.value=j()}p.value&&s&&_(["copy","cut"],i);async function v(f=b(n)){p.value&&f!=null&&(d.value&&k(l.value)?await t.clipboard.writeText(f):R(f),u.value=f,m.value=!0,a.start())}function R(f){const y=document.createElement("textarea");y.value=f??"",y.style.position="absolute",y.style.opacity="0",document.body.appendChild(y),y.select(),document.execCommand("copy"),y.remove()}function j(){var f,y,E;return(E=(y=(f=document==null?void 0:document.getSelection)==null?void 0:f.call(document))==null?void 0:y.toString())!=null?E:""}function k(f){return f==="granted"||f==="prompt"}return{isSupported:p,text:u,copied:m,copy:v}}const ce={class:"icon-wrapper"},ue=$({__name:"ProseCodeCopyButton",props:{content:{type:String,default:""},show:{type:Boolean,default:!1}},setup(e){const t=e,s=w(),{copy:n}=re();se(s,()=>{o.value==="copied"&&(o.value="init")});const{prose:r}=D(),o=w("init"),d=c=>{n(t.content).then(()=>{o.value="copied"}).catch(l=>{console.warn("Couldn't copy to clipboard!",l)})};return(c,l)=>{const p=U;return S(),K("button",{ref_key:"copyButtonRef",ref:s,class:Q([(e.show||o.value==="copied")&&"show"]),onClick:d},[l[0]||(l[0]=x("span",{class:"sr-only"},"Copy to clipboard",-1)),x("span",ce,[X(J,{name:"fade"},{default:H(()=>{var u,m;return[o.value==="copied"?(S(),B(p,{key:0,name:(u=A(r).copyButton)==null?void 0:u.iconCopied,size:"18",class:"copied"},null,8,["name"])):(S(),B(p,{key:1,name:(m=A(r).copyButton)==null?void 0:m.iconCopy,size:"18"},null,8,["name"]))]}),_:1})])],2)}}}),de=Y(ue,[["__scopeId","data-v-4a003820"]]);export{de as default};
